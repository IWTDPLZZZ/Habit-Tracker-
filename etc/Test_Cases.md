# USE CASES — Habit Tracker / AI-Coach  

## 1. Актёры

| Актёр | Описание |
|-------|----------|
| **Guest (Гость)** | Неавторизованный пользователь. Имеет доступ только к регистрации и входу. |
| **User (Пользователь)** | Авторизованный пользователь. Может создавать привычки, отмечать выполнение, работать с ИИ-планом. |
| **AI-Coach (Система ИИ)** | Встроенный модуль, генерирующий персональные планы, советы, адаптацию расписания. |

---

## 2. Варианты использования

### UC1 — Регистрация пользователя
**Актёр:** Guest  
**Предусловие:** Пользователь не авторизован.  
**Основной поток:**
1. Пользователь нажимает «Создать аккаунт».
2. Система выводит форму: Email, Пароль, Подтверждение пароля.
3. Пользователь вводит данные и отправляет форму.
4. Backend проверяет email на уникальность и валидность.
5. Пароль хэшируется, создаётся запись в БД.
6. Система сообщает об успешной регистрации и перенаправляет на страницу входа.

**Альтернативные потоки:**
- A1: Email уже используется → сообщение «Почта уже зарегистрирована».
- A2: Пароли не совпадают → сообщение об ошибке.
- A3: Неверный формат email → ошибка валидации.

**Постусловие:** Создан новый пользовательский аккаунт.

---

### UC2 — Вход в систему
**Актёр:** Guest  
**Предусловие:** Аккаунт существует.  
**Основной поток:**
1. Пользователь вводит email и пароль.
2. Frontend отправляет запрос /auth/login.
3. Backend сверяет пароль (bcrypt).
4. Система возвращает JWT, который сохраняется в httpOnly cookie.
5. Пользователь перенаправляется в личный кабинет.

**Альтернативные потоки:**
- A1: Неверный пароль → «Неверные данные входа».
- A2: Аккаунт не найден → «Пользователь не существует».

**Постусловие:** Пользователь авторизован.

---

### UC3 — Создание привычки
**Актёр:** User  
**Предусловие:** Пользователь авторизован.  
**Основной поток:**
1. Пользователь нажимает «Добавить привычку».
2. Система отображает форму: название, частота, время, цель/категория.
3. Пользователь подтверждает создание.
4. Backend сохраняет запись в таблицу `habits`.
5. UI обновляется, привычка отображается в списке.

**Альтернативные потоки:**
- A1: Отсутствует название → ошибка валидации.
- A2: Частота не выбрана → системный дефолт (ежедневно).

**Постусловие:** Новая привычка создана.

---

### UC4 — Редактирование / удаление привычки
**Актёр:** User  
**Предусловие:** Привычка принадлежит пользователю.  
**Основной поток:**
1. Пользователь выбирает привычку.
2. Система предлагает «Редактировать» или «Удалить».
3. Backend обновляет/удаляет запись в БД.
4. UI обновляется.

**Альтернативные потоки:**
- A1: Попытка удалить чужую привычку → 403 Forbidden.

---

### UC5 — Отметка выполнения привычки
**Актёр:** User  
**Основной поток:**
1. Пользователь нажимает чекбокс «Выполнено».
2. Backend фиксирует запись в `progress`.
3. AI-Coach получает новое состояние для анализа.
4. Интерфейс обновляет прогресс-индикатор.

**Постусловие:** Прогресс сохранён.

---

### UC6 — Генерация 30-дневного AI-плана
**Актёр:** User + AI-Coach  
**Предусловие:** У пользователя выбрана цель (Здоровье / Продуктивность и т.д.).  
**Основной поток:**
1. Пользователь нажимает «Сгенерировать план».
2. Frontend отправляет запрос к AI-модулю.
3. AI-Coach формирует список предложенных привычек + расписание.
4. План отображается пользователю.

**Альтернативные потоки:**
- A1: Недостаточно данных → AI предлагает опрос.
- A2: AI недоступен → уведомление «Попробуйте позже».

**Постусловие:** Пользователь получает персональный план.

---

### UC7 — Принятие / изменение AI-плана
**Актёр:** User  
**Основной поток:**
1. Пользователь принимает план целиком или частично.
2. Выбранные привычки сохраняются в `AI_generated_habits`.
3. План интегрируется в пользовательские привычки.

**Альтернативные потоки:**
- A1: Пользователь редактирует отдельные элементы → AI перестраивает план.

---

### UC8 — Просмотр статистики и аналитики
**Актёр:** User  
**Основной поток:**
1. Пользователь открывает вкладку «Статистика».
2. Backend отдаёт агрегированные данные: % выполнения, streak, слабые дни.
3. UI отображает графики, диаграммы, streak-счётчики.

---

### UC9 — Получение AI-советов
**Актёр:** User + AI-Coach  
**Основной поток:**
1. Пользователь нажимает «Получить совет».
2. Backend отправляет данные прогресса AI-Coach.
3. AI-Coach возвращает рекомендации (текст/совет/подсказка).
4. Система отображает уведомление/карточку с советом.

---

## 3. Диаграмма связей Use Cases

*(при необходимости можно добавить диаграмму UML позже)*

---

## 4. Статус документа

| Раздел | Статус |
|--------|--------|
| Актёры | ✅ |
| UC1–UC9 | ✅ |
| Диаграмма UML | ⏳ (опционально) |

---

